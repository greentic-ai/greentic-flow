# Canonical v0.6 Vision

`greentic-flow` must use the canonical component contract only:
`greentic:component@0.6.0`.

## Setup discovery

- Call `describe()` on the component node.
- Read setup metadata from `component-descriptor.setup`.
- Treat missing `setup` as "component does not support setup wizard flows".

## Setup execution

- Execute setup through canonical invoke:
  - op: `setup.apply_answers`
  - envelope payload: CBOR map including:
    - `mode`: `default|setup|update|remove`
    - `current_config_cbor` (required for update/remove)
    - `answers_cbor` (required for default/setup/update)
    - `metadata_cbor` (optional)
- `remove` mode must require explicit user confirmation (`Type REMOVE to confirm`)
  before invoke.

## Mode semantics

Modes are orchestrator behavior in `greentic-flow`; they are not a separate ABI:

- `default`: ask required unanswered fields only
- `setup`: full setup QA run
- `update`: seeded from current config
- `remove`: confirmed removal flow

## Contracts rule

- Use WIT-derived types from `greentic_interfaces::canonical::*`.
- Do not add or consume parallel wizard ABIs for runtime execution.
- Keep legacy references (if any) documentation-only under `docs/vision/legacy.md`
  and WIT-only under `wit/legacy/`.
